"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2778],{6763:(P,m,r)=>{r.r(m),r.d(m,{AttendancePageModule:()=>v});var h=r(6814),p=r(95),a=r(7027),_=r(4248),u=r(5861),g=r(9862),e=r(6689),f=r(2778);function A(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"ion-col",18)(1,"ion-card",19),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.Scan())}),e.TgZ(2,"ion-card-header")(3,"ion-card-subtitle"),e._UZ(4,"ion-icon",20),e.qZA()(),e.TgZ(5,"ion-card-content"),e._uU(6,"Check-In "),e.qZA(),e._UZ(7,"ion-ripple-effect"),e.qZA()()}}function Z(o,s){if(1&o){const i=e.EpF();e.TgZ(0,"ion-col",21)(1,"ion-card",19),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.UD())}),e.TgZ(2,"ion-card-header")(3,"ion-card-subtitle"),e._UZ(4,"ion-icon",22),e.qZA()(),e.TgZ(5,"ion-card-content"),e._uU(6,"Check-Out "),e.qZA(),e._UZ(7,"ion-ripple-effect"),e.qZA()()}}function y(o,s){1&o&&(e.TgZ(0,"ion-item",8)(1,"h4"),e._uU(2,"Full Details"),e.qZA()())}function C(o,s){if(1&o&&(e.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label")(3,"b"),e._uU(4,"Address : "),e.qZA(),e._uU(5),e.qZA()(),e.TgZ(6,"ion-item")(7,"ion-label")(8,"b"),e._uU(9,"Clock Time : "),e.qZA(),e._uU(10),e.qZA()(),e.TgZ(11,"ion-item")(12,"ion-label")(13,"b"),e._uU(14,"Break Time : "),e.qZA(),e._uU(15),e.qZA()()()),2&o){const i=e.oxw();e.xp6(5),e.Oqu(i.details.address),e.xp6(5),e.AsE("",i.details.start_time," - ",i.details.end_time,""),e.xp6(5),e.Oqu(i.details.break_time)}}const T=[{path:"",component:(()=>{var o;class s{constructor(t,n,c,l,d){this.http=t,this.navCtrl=n,this.alertController=c,this.authService=l,this.HttpHeaders=d,this.isSupported=!1,this.week={status:null,message:null,data:[]},this.clock={status:null,message:null},this.checkin=!0,this.textColor="#800080",this.backgroundColor="#c8e5d0",this.isWeekday=b=>{const k=new Date(b).getUTCDay();return 0!==k&&6!==k},this.key=localStorage.getItem("key"),this.userId=localStorage.getItem("userId"),this.companyId=localStorage.getItem("companyId"),this.dateTime=(new Date).toDateString(),this.getWeek()}dateTimeUpdated(t){try{if(this.week.data){const c=(0,h.p6)(t.detail.value,"yyyy-MM-dd","en-US");this.details=this.week.data.find(l=>l.rotas_date==c)}else alert("No Details Found")}catch(n){console.error(n)}}getWeek(){var t=this;return(0,u.Z)(function*(){yield t.http.get("http://27.54.59.11/live/index.php/Attendance_api?key="+t.key+"&userid="+t.userId+"&companyid="+t.companyId).subscribe(n=>{t.week=n,t.hightlightedData()},n=>{console.log(n)})})()}hightlightedData(){var t=this;return(0,u.Z)(function*(){if(1==t.week.status&&"No Record Found!"!=t.week.message){let n=0;yield t.week.data.forEach(c=>{t.week.data[n].date=c.rotas_date,t.week.data[n].textColor=t.textColor,t.week.data[n].backgroundColor=t.backgroundColor,n++})}else alert("No data Recieve")})()}ngOnInit(){}Scan(){this.checkIn()}checkIn(){var t=this;return(0,u.Z)(function*(){new g.WM({"Content-Type":"application/json",Accept:"application/json, application/xml","Cache-Control":"no-cache"}),yield t.http.put("http://27.54.59.11/live/index.php/Attendance_api?key=unioni32sweL96Og5t1cvziazmUJtFLrTo3NCW5LXRGd2UcckLlX1QRr5yEkiUNIXVCKYVbzjJJNvqsCrSEH4zpasQd1syS4qljaOUEjVLHDay2xSWBEumU5vpsynEOr&user_id=7&company_id=2",{}).subscribe(c=>{console.log(c,"data"),t.clock=c,t.clock.status&&(alert(t.clock.message),t.checkin=!t.checkin)},c=>{alert(c.error.message),console.log(c)})})()}UD(){var t=this;return(0,u.Z)(function*(){1==confirm("Are you Sure, You want to Check-Out")&&(new g.WM({"Content-Type":"application/json",Accept:"application/json, application/xml","Cache-Control":"no-cache"}),yield t.http.patch("http://27.54.59.11/live/index.php/Attendance_api?key=unioni32sweL96Og5t1cvziazmUJtFLrTo3NCW5LXRGd2UcckLlX1QRr5yEkiUNIXVCKYVbzjJJNvqsCrSEH4zpasQd1syS4qljaOUEjVLHDay2xSWBEumU5vpsynEOr&user_id=7&company_id=2",null).subscribe(l=>{console.log(l),t.clock=l,t.clock.status&&(t.checkin=!t.checkin,alert(t.clock.message)),console.log(t.clock)},l=>{console.log(l),alert(l.error.message)}))})()}logout(){console.log("logout"),localStorage.clear(),this.navCtrl.navigateRoot("/login")}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(g.eN),e.Y36(a.SH),e.Y36(a.Br),e.Y36(f.s),e.Y36(g.eN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-attendance"]],decls:37,vars:9,consts:[[1,"header",3,"translucent"],["color","primary"],["slot","start"],[1,"ion-arrow-left-c"],["slot","end"],[3,"click"],["name","power","size","small"],[3,"fullscreen"],[1,"title"],["class","Checkin",4,"ngIf"],["class","Checkout",4,"ngIf"],[1,"ion-margin-horizontal"],["presentation","date",3,"ngModel","isDateEnabled","highlightedDates","ionChange","ngModelChange"],["datetime",""],["slot","buttons"],["color","primary",3,"click"],["class","title",4,"ngIf"],[4,"ngIf"],[1,"Checkin"],[1,"ion-activatable","ripple-parent","rectangle",3,"click"],["name","qr-code","color","light"],[1,"Checkout"],["name","log-out","color","light"]],template:function(t,n){if(1&t){const c=e.EpF();e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),e._uU(3," Attendance "),e.qZA(),e.TgZ(4,"ion-buttons",2)(5,"ion-back-button"),e._UZ(6,"i",3),e._uU(7," Back"),e.qZA()(),e.TgZ(8,"ion-buttons",4)(9,"ion-button",5),e.NdJ("click",function(){return n.logout()}),e._UZ(10,"ion-icon",6),e.qZA()()()(),e.TgZ(11,"ion-content",7)(12,"ion-item",8)(13,"h4"),e._uU(14,"Perform These Steps To Check-in"),e.qZA()(),e.TgZ(15,"ion-item")(16,"p"),e._uU(17," 1- Scan your check-in barcode "),e._UZ(18,"br"),e._uU(19," 2- Take a selfie "),e._UZ(20,"br"),e._uU(21," 3- Submit "),e.qZA()(),e.TgZ(22,"ion-grid")(23,"ion-row"),e.YNc(24,A,8,0,"ion-col",9),e.YNc(25,Z,8,0,"ion-col",10),e.qZA()(),e.TgZ(26,"ion-item",8)(27,"h4"),e._uU(28,"Check Your History"),e.qZA()(),e.TgZ(29,"ion-item",11)(30,"ion-datetime",12,13),e.NdJ("ionChange",function(d){return n.dateTimeUpdated(d)})("ngModelChange",function(d){return n.SelDate=d}),e.TgZ(32,"ion-buttons",14)(33,"ion-button",15),e.NdJ("click",function(){e.CHM(c);const d=e.MAs(31);return e.KtG(d.confirm())}),e._uU(34,"Details"),e.qZA()()()(),e.YNc(35,y,3,0,"ion-item",16),e.YNc(36,C,16,4,"ion-list",17),e.qZA()}2&t&&(e.Q6J("translucent",!0),e.xp6(11),e.Q6J("fullscreen",!0),e.xp6(13),e.Q6J("ngIf",1==n.checkin),e.xp6(1),e.Q6J("ngIf",0==n.checkin),e.xp6(5),e.Q6J("ngModel",n.SelDate)("isDateEnabled",n.isWeekday)("highlightedDates",n.week.data),e.xp6(5),e.Q6J("ngIf",n.details),e.xp6(1),e.Q6J("ngIf",n.details))},dependencies:[h.O5,p.JJ,p.On,a.oU,a.YG,a.Sm,a.PM,a.FN,a.Zi,a.tO,a.wI,a.W2,a.x4,a.jY,a.Gu,a.gu,a.Ie,a.Q$,a.q_,a.H$,a.Nd,a.wd,a.sr,a.QI,a.cs],styles:["ion-card[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);margin:0;text-align:center;color:#000!important;padding:20px 0}ion-icon[_ngcontent-%COMP%]{font-size:46px}ion-card-content[_ngcontent-%COMP%]{color:var(--ion-color-light);font-size:18px}.title[_ngcontent-%COMP%]{color:#293991;font-weight:900!important}"]}),s})()}];let U=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[_.Bz.forChild(T),_.Bz]}),s})(),v=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.ez,p.u5,a.Pc,U]}),s})()}}]);