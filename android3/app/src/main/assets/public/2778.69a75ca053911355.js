"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2778],{2778:(P,k,l)=>{l.r(k),l.d(k,{AttendancePageModule:()=>U});var h=l(6814),m=l(95),i=l(7027),y=l(4248),g=l(5861),p=l(9862),d=l(1273),e=l(6689),A=l(8789);function Z(o,r){1&o&&(e.TgZ(0,"ion-item",8)(1,"h4"),e._uU(2,"Full Details"),e.qZA()())}function v(o,r){if(1&o&&(e.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label")(3,"b"),e._uU(4,"Address : "),e.qZA(),e._uU(5),e.qZA()(),e.TgZ(6,"ion-item")(7,"ion-label")(8,"b"),e._uU(9,"Clock Time : "),e.qZA(),e._uU(10),e.qZA()(),e.TgZ(11,"ion-item")(12,"ion-label")(13,"b"),e._uU(14,"Break Time : "),e.qZA(),e._uU(15),e.qZA()()()),2&o){const s=e.oxw();e.xp6(5),e.Oqu(s.details.address),e.xp6(5),e.AsE("",s.details.start_time," - ",s.details.end_time,""),e.xp6(5),e.Oqu(s.details.break_time)}}const f=function(o){return{NoDisplay:o}},C=[{path:"",component:(()=>{var o;class r{constructor(t,n,a,c,u){this.http=t,this.navCtrl=n,this.alertController=a,this.authService=c,this.HttpHeaders=u,this.isSupported=!1,this.week={status:null,message:null,data:[]},this.clock={status:null,message:null},this.textColor="#800080",this.backgroundColor="#c8e5d0",this.isWeekday=b=>{const _=new Date(b).getUTCDay();return 0!==_&&6!==_}}getkeys(){var t=this;return(0,g.Z)(function*(){yield d.u.get({key:"checkin"}).then(n=>{t.checkin=n.value,console.log(n.value,"checkin1")}),yield d.u.get({key:"key"}).then(n=>{t.key=n.value,console.log(n.value,"key")}),yield d.u.get({key:"userId"}).then(n=>{t.userId=n.value,console.log(n.value,"user id")}),yield d.u.get({key:"companyId"}).then(n=>{t.companyId=n.value,console.log(n.value,"company id")}),t.getWeek()})()}dateTimeUpdated(t){try{if(this.week.data){const a=(0,h.p6)(t.detail.value,"yyyy-MM-dd","en-US");this.details=this.week.data.find(c=>c.rotas_date==a)}else alert("No Details Found")}catch(n){console.error(n)}}getWeek(){var t=this;return(0,g.Z)(function*(){yield t.http.get("https://saintsecurity.com/live/index.php/Attendance_api?key="+t.key+"&userid="+t.userId+"&companyid="+t.companyId).subscribe(n=>{t.week=n,console.log(n),t.hightlightedData()},n=>{console.log(n)})})()}hightlightedData(){var t=this;return(0,g.Z)(function*(){if(1==t.week.status&&"No Record Found!"!=t.week.message){let n=0;yield t.week.data.forEach(a=>{t.week.data[n].date=a.rotas_date,t.week.data[n].textColor=t.textColor,t.week.data[n].backgroundColor=t.backgroundColor,n++})}else alert("No data Recieve")})()}ngOnInit(){this.getkeys(),this.dateTime=(new Date).toDateString()}Scan(){this.checkIn()}checkIn(){var t=this;return(0,g.Z)(function*(){new p.WM({"Content-Type":"application/json",Accept:"application/json, application/xml","Cache-Control":"no-cache"}),yield t.http.put("https://saintsecurity.com/live/index.php/Attendance_api?key="+t.key+"&user_id="+t.userId+"&company_id="+t.companyId,null).subscribe(a=>{console.log(a,"data"),t.clock=a,t.clock.status&&(alert(t.clock.message),t.checkin=!t.checkin,d.u.set({key:"checkin",value:"false"}),console.log(t.checkin,"checkin2"))},a=>{a.error.status?alert(a.text):alert(a.error.message),console.log(a)})})()}UD(){var t=this;return(0,g.Z)(function*(){1==confirm("Are you Sure, You want to Check-Out")&&(new p.WM({"Content-Type":"application/json",Accept:"application/json, application/xml","Cache-Control":"no-cache"}),yield t.http.patch("https://saintsecurity.com/live/index.php/Attendance_api?key="+t.key+"&user_id="+t.userId+"&company_id="+t.companyId,null).subscribe(c=>{console.log(c),t.clock=c,t.clock.status&&(t.checkin=!t.checkin,alert(t.clock.message),d.u.set({key:"checkin",value:"true"}),console.log(t.checkin,"checkout")),console.log(t.clock)},c=>{console.log(c),alert(c.error.message)}))})()}logout(){console.log("logout"),d.u.clear(),this.navCtrl.navigateRoot("/login")}}return(o=r).\u0275fac=function(t){return new(t||o)(e.Y36(p.eN),e.Y36(i.SH),e.Y36(i.Br),e.Y36(A.s),e.Y36(p.eN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-attendance"]],decls:51,vars:13,consts:[[1,"header",3,"translucent"],["color","primary"],["slot","start"],[1,"ion-arrow-left-c"],["slot","end"],[3,"click"],["name","power","size","small"],[3,"fullscreen"],[1,"title"],[3,"ngClass"],[1,"ion-activatable","ripple-parent","rectangle",3,"click"],["name","qr-code","color","light"],["name","log-out","color","light"],[1,"ion-margin-horizontal"],["presentation","date",3,"ngModel","isDateEnabled","highlightedDates","ionChange","ngModelChange"],["datetime",""],["slot","buttons"],["color","primary",3,"click"],["class","title",4,"ngIf"],[4,"ngIf"]],template:function(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),e._uU(3," Attendance "),e.qZA(),e.TgZ(4,"ion-buttons",2)(5,"ion-back-button"),e._UZ(6,"i",3),e._uU(7," Back"),e.qZA()(),e.TgZ(8,"ion-buttons",4)(9,"ion-button",5),e.NdJ("click",function(){return n.logout()}),e._UZ(10,"ion-icon",6),e.qZA()()()(),e.TgZ(11,"ion-content",7)(12,"ion-item",8)(13,"h4"),e._uU(14,"Perform These Steps To Check-in"),e.qZA()(),e.TgZ(15,"ion-item")(16,"p"),e._uU(17," 1- Scan your check-in barcode "),e._UZ(18,"br"),e._uU(19," 2- Take a selfie "),e._UZ(20,"br"),e._uU(21," 3- Submit "),e.qZA()(),e.TgZ(22,"ion-grid")(23,"ion-row")(24,"ion-col",9)(25,"ion-card",10),e.NdJ("click",function(){return n.Scan()}),e.TgZ(26,"ion-card-header")(27,"ion-card-subtitle"),e._UZ(28,"ion-icon",11),e.qZA()(),e.TgZ(29,"ion-card-content"),e._uU(30,"Check-In "),e.qZA(),e._UZ(31,"ion-ripple-effect"),e.qZA()(),e.TgZ(32,"ion-col",9)(33,"ion-card",10),e.NdJ("click",function(){return n.UD()}),e.TgZ(34,"ion-card-header")(35,"ion-card-subtitle"),e._UZ(36,"ion-icon",12),e.qZA()(),e.TgZ(37,"ion-card-content"),e._uU(38,"Check-Out "),e.qZA(),e._UZ(39,"ion-ripple-effect"),e.qZA()()()(),e.TgZ(40,"ion-item",8)(41,"h4"),e._uU(42,"Check Your History"),e.qZA()(),e.TgZ(43,"ion-item",13)(44,"ion-datetime",14,15),e.NdJ("ionChange",function(u){return n.dateTimeUpdated(u)})("ngModelChange",function(u){return n.SelDate=u}),e.TgZ(46,"ion-buttons",16)(47,"ion-button",17),e.NdJ("click",function(){e.CHM(a);const u=e.MAs(45);return e.KtG(u.confirm())}),e._uU(48,"Details"),e.qZA()()()(),e.YNc(49,Z,3,0,"ion-item",18),e.YNc(50,v,16,4,"ion-list",19),e.qZA()}2&t&&(e.Q6J("translucent",!0),e.xp6(11),e.Q6J("fullscreen",!0),e.xp6(13),e.Q6J("ngClass",e.VKq(9,f,"false"==n.checkin||0==n.checkin)),e.xp6(8),e.Q6J("ngClass",e.VKq(11,f,"true"==n.checkin||1==n.checkin)),e.xp6(12),e.Q6J("ngModel",n.SelDate)("isDateEnabled",n.isWeekday)("highlightedDates",n.week.data),e.xp6(5),e.Q6J("ngIf",n.details),e.xp6(1),e.Q6J("ngIf",n.details))},dependencies:[h.mk,h.O5,m.JJ,m.On,i.oU,i.YG,i.Sm,i.PM,i.FN,i.Zi,i.tO,i.wI,i.W2,i.x4,i.jY,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.H$,i.Nd,i.wd,i.sr,i.QI,i.cs],styles:["ion-card[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);margin:0;text-align:center;color:#000!important;padding:20px 0}ion-icon[_ngcontent-%COMP%]{font-size:46px}ion-card-content[_ngcontent-%COMP%]{color:var(--ion-color-light);font-size:18px}.title[_ngcontent-%COMP%]{color:#293991;font-weight:900!important}.NoDisplay[_ngcontent-%COMP%]{display:none}"]}),r})()}];let T=(()=>{var o;class r{}return(o=r).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[y.Bz.forChild(C),y.Bz]}),r})(),U=(()=>{var o;class r{}return(o=r).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.ez,m.u5,i.Pc,T]}),r})()}}]);